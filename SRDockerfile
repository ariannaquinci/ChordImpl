
# Usa un'immagine di base contenente Go per compilare l'applicazione
FROM golang:1.17 AS build
WORKDIR /app

# Copia i file go.mod per scaricare le dipendenze
COPY go.mod ./
RUN go mod download

# Copia il resto del codice dell'applicazione
COPY serviceRegistry/serviceRegistry.go ./
COPY utils ./utils

# Compila l'applicazione
RUN go build -o serviceRegistry .
# Definisci le variabili d'ambiente per l'indirizzo IP e la porta
ENV IP $IP
ENV PORT $PORT
ENV RING_SIZE $RING_SIZE

EXPOSE $PORT
# Esegui l'applicazione
CMD ["./serviceRegistry"]
